<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">

<!--Thư viện css và font -->
<th:block th:fragment="library">
    <!--    Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/img/favicon.png}">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/bootstrap.min.css}">
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>
    <link th:href="@{/css/timeline.css}" rel="stylesheet"/>
    <link th:href="@{/vendor/datatables/datatables.min.css}" rel="stylesheet"/>
    <script th:src="@{/vendor/fontawesome/fontawesome_all_v6.3.0.js}" crossorigin="anonymous"></script>
</th:block>

<div th:fragment="topbar">
    <header>
        <nav class="sb-topnav navbar navbar-expand bg-body-tertiary bg-gradient shadow">

            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" th:href="@{/}">
                <img class="img-fluid" th:src="@{/img/mobifone.png}"/>
            </a>

            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i
                    class="fas fa-bars"></i></button>

            <!--         Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..."
                           aria-describedby="btnNavbarSearch"/>
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i>
                    </button>
                </div>
            </form>


            <!-- Navbar Search-->
            <!--        <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">-->
            <!--            <div class="input-group">-->
            <!--                <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..."-->
            <!--                       aria-describedby="btnNavbarSearch"/>-->
            <!--                <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i>-->
            <!--                </button>-->
            <!--            </div>-->
            <!--        </form>-->


            <!--         Navbar-->


            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item" sec:authorize="!isAuthenticated()">
                    <a class="nav-link btn btn-link" th:href="@{/login}" role="button"
                       aria-expanded="false">
                        <span sec:authorize="!isAuthenticated()">Đăng nhập</span>
                    </a>
                </li>

                <li class="nav-item dropdown" sec:authorize="isAuthenticated()">

                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                       data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <i class="fas fa-user fa-fw"></i>
                        <span sec:authentication="name"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li sec:authorize="isAuthenticated()">
                            <hr class="dropdown-divider"/>
                        </li>
                        <li sec:authorize="isAuthenticated()">
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">Đăng
                                xuất
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>
</div>

<th:block th:fragment="sidebar">
    <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
            <div class="sb-sidenav-menu">
                <div class="nav">

                    <!-- 1 -->
                    <div class="sb-sidenav-menu-heading">Hệ thống</div>
                    <a class="nav-link" th:href="@{/}">
                        <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                        Tổng quan
                    </a>

                    <!-- 2 -->
                    <div class="sb-sidenav-menu-heading">Quy hoạch</div>
                    <!-- 2.1 -->

                    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts"
                       aria-expanded="false" aria-controls="collapseLayouts">
                        <div class="sb-nav-link-icon"><i class="fas fa-home"></i></div>
                        Site
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>
                    <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne"
                         data-bs-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested nav">
                            <a class="nav-link" th:href="@{/site/detail}">Tra cứu thông tin trạm</a>
                            <a class="nav-link" th:href="@{/site/list}">Danh sách trạm</a>
                            <a class="nav-link" th:href="@{/site/create}">Thêm mới</a>
                        </nav>
                    </div>

                    <!-- 3 -->
                    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages"
                       aria-expanded="false" aria-controls="collapsePages">
                        <div class="sb-nav-link-icon"><i class="fas fa-hdd"></i></div>
                        Thiết bị
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>
                    <div class="collapse" id="collapsePages" aria-labelledby="headingTwo"
                         data-bs-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                               data-bs-target="#pagesCollapseAuth" aria-expanded="false"
                               aria-controls="pagesCollapseAuth">
                                Quản lý dữ liệu
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="pagesCollapseAuth" aria-labelledby="headingOne"
                                 data-bs-parent="#sidenavAccordionPages">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" th:href="@{/router/list}">Danh sách thiết bị</a>
                                    <a class="nav-link" th:href="@{/router/create}">Thêm mới</a>
                                </nav>
                            </div>
                        </nav>
                    </div>

                    <!-- 3 -->
                    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseTrans"
                       aria-expanded="false" aria-controls="collapseTrans">
                        <div class="sb-nav-link-icon"><i class="fas fa-arrows"></i></div>
                        Truyền dẫn
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>
                    <div class="collapse" id="collapseTrans" aria-labelledby="headingTwo"
                         data-bs-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavTrans">
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                               data-bs-target="#pagesCollapseFo" aria-expanded="false" aria-controls="pagesCollapseFo">
                                Cáp quang thuê
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="pagesCollapseFo" aria-labelledby="headingOne"
                                 data-bs-parent="#sidenavAccordionPages">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" th:href="@{/contract/list}">Danh sách hợp đồng thuê</a>
                                    <a class="nav-link" th:href="@{/hired-fo/list}">Danh sách FO thuê</a>
                                    <a class="nav-link" th:href="@{/contract/create}">Thêm mới hợp đồng</a>
                                    <!--                                    <a class="nav-link" href="/router/control">Khác</a>-->
                                </nav>
                            </div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                               data-bs-target="#pagesCollapseLL" aria-expanded="false" aria-controls="pagesCollapseLL">
                                Kênh thuê
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="pagesCollapseLL" aria-labelledby="headingOne"
                                 data-bs-parent="#sidenavAccordionPages">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" th:href="@{/leaseline/list}">Danh sách</a>
                                    <a class="nav-link" th:href="@{/leaseline/create}">Thêm mới</a>
                                </nav>
                            </div>
                        </nav>
                    </div>

                </div>
            </div>

            <div class="sb-sidenav-footer">
                <div class="small">
                    <span sec:authorize="isAuthenticated()">
                            <span sec:authentication="principal.authorities"></span>
                    </span>
                    <span sec:authorize="!isAuthenticated()">
                            Chưa đăng nhập
                    </span>

                </div>
            </div>


        </nav>
    </div>

    <!-- Modal Logout-->
    <div class="modal fade modal-sm" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title " id="logoutModalLabel">Đăng xuất</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-body">
                        <p>Bạn có muốn đăng xuất ?</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <a th:href="@{/logout}" class="btn btn-primary">Đăng xuất</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Login-->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form th:action="@{/process-login}" method="post">
                    <div class="modal-header">
                        <h5 class="modal-title " id="loginModalLabel">Đăng nhập</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-body">
                            <div class="input-group flex-nowrap mb-3">
                                <span class="input-group-text"><i class="fa fa-user fa-fw"></i></span>
                                <input type="text" class="form-control" name="username" placeholder="Username"
                                       aria-label="Username" aria-describedby="addon-wrapping">
                            </div>
                            <div class="input-group flex-nowrap mb-3">
                                <span class="input-group-text"><i class="fa fa-key fa-fw"></i></span>
                                <input type="text" class="form-control" name="password" placeholder="Password"
                                       aria-label="password" aria-describedby="addon-wrapping">
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" id="inputRememberPassword" type="checkbox" value=""/>
                                <label class="form-check-label" for="inputRememberPassword">Ghi nhớ mật khẩu</label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="submit" class="btn btn-primary">Đăng nhập</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</th:block>


<div th:fragment="js-libs">
    <!-- Latest compiled and minified JavaScript -->
    <script th:src="@{/vendor/bootstrap/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/scripts.js}"></script>
    <script th:src="@{/vendor/chartjs/Chart.bundle.min.js}"></script>
    <script th:src="@{/assets/chartjs/trans-pie-chart.js}"></script>
    <script th:src="@{/assets/chartjs/site-bar-chart.js}"></script>
    <script th:src="@{/vendor/jquery/jquery-3.7.1.js}"></script>
    <script th:src="@{/vendor/pdfmake/pdfmake.js}"></script>
    <script th:src="@{/vendor/pdfmake/vfs_fonts.js}"></script>
    <script th:src="@{/vendor/datatables/datatables.min.js}"></script>
    <script th:src="@{/vendor/moment.js}"></script>
</div>


<div th:fragment="footer">
    <footer class="py-4 bg-light mt-auto">
        <div class="container-fluid px-4">
            <div class="d-flex align-items-center justify-content-between small">
                <div class="text-muted">Copyright &copy; Nguyễn Song Nghiêm 2024</div>
                <div>
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms &amp; Conditions</a>
                </div>
            </div>
        </div>
    </footer>
</div>

</html>
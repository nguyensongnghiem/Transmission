# TiMOS-B-8.0.R10 both/hops NOKIA SAR 7705 Copyright (c) 2000-2018 Nokia.
# All rights reserved. All use subject to applicable license agreements.
# Built on Tue May 29 15:20:58 EDT 2018 by builder in /builds/F80B/R10/panos/main

# Generated WED FEB 12 00:00:04 2025 UTC

exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "CSG-KHCL02"
        dns
        exit
        snmp
            packet-size 9216
        exit
        time
            ntp
                server 10.250.88.11 prefer
                server 10.250.88.12
                no shutdown
            exit
            sntp
                shutdown
            exit
            zone ICT 07
        exit
        thresholds
            rmon
            exit
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            telnet-server
            ftp-server
            profile "Full"
                default-action permit-all
                entry 10
                    match "clear log"
                    action deny
                exit
                entry 13
                    match "configure system security"
                    action permit
                exit
            exit
            profile "Full-"
                default-action permit-all
                entry 10
                    match "clear log"
                    action deny
                exit
                entry 20
                    match "configure system security user"
                    action deny
                exit
                entry 21
                    match "configure system security"
                    action permit
                exit
            exit
            profile "Full--"
                default-action permit-all
                entry 10
                    match "clear log"
                    action deny
                exit
                entry 20
                    match "configure system security user"
                    action deny
                exit
                entry 21
                    match "configure system security"
                    action permit
                exit
                entry 30
                    match "file delete"
                    action deny
                exit
            exit
            profile "Full---"
                default-action deny-all
                entry 10
                    match "configure service vprn"
                    action permit
                exit
                entry 20
                    match "show router"
                    action permit
                exit
                entry 30
                    match "info"
                    action permit
                exit
                entry 40
                    match "admin display-config"
                    action permit
                exit
                entry 50
                    match "ping"
                    action permit
                exit
            exit
            profile "console"
                default-action permit-all
                entry 10
                    match "telnet"
                    action deny
                exit
                entry 20
                    match "ssh"
                    action deny
                exit
            exit
            profile "operator-mlmt"
                default-action deny-all
                entry 10
                    match "show"
                    action permit
                exit
                entry 20
                    match "ping"
                    action permit
                exit
                entry 30
                    match "monitor"
                    action permit
                exit
                entry 40
                    match "ssh"
                    action permit
                exit
                entry 50
                    match "traceroute"
                    action permit
                exit
                entry 60
                    match "admin display-config"
                    action permit
                exit
                entry 70
                    match "exit"
                    action permit
                exit
                entry 80
                    match "configure"
                    action permit
                exit
                entry 90
                    match "info"
                    action permit
                exit
                entry 100
                    match "admin save"
                    action permit
                exit
                entry 110
                    match "telnet"
                    action permit
                exit
            exit
            profile "operator-mlmt-tc"
                default-action deny-all
                entry 10
                    match "show"
                    action permit
                exit
                entry 20
                    match "ping"
                    action permit
                exit
                entry 30
                    match "monitor"
                    action permit
                exit
                entry 40
                    match "ssh"
                    action permit
                exit
                entry 50
                    match "traceroute"
                    action permit
                exit
                entry 60
                    match "admin display-config"
                    action permit
                exit
                entry 70
                    match "exit"
                    action permit
                exit
                entry 80
                    match "configure"
                    action permit
                exit
                entry 90
                    match "info"
                    action permit
                exit
                entry 100
                    match "admin save"
                    action permit
                exit
                entry 110
                    match "admin reboot"
                    action permit
                exit
            exit
            password
                authentication-order tacplus local  exit-on-reject
                no health-check
            exit
            tacplus
                accounting
                authorization 
                timeout 5
                server 1 address 10.250.18.106 secret "mJx.ZXNZyP82PI7TeWdyTRdbGsIhXtTK" hash2
            exit
            no user "admin"
            user "adminptd"
                password "$2y$10$ptbBxAbY6dwivCOjUMf7w.TdzorCmn8y0YTYJfEHlJsh/fFdqiYrC"
                access console 
                console
                    no member "default"
                    member "administrative"
                exit
            exit
            user "dvt_admin_BDH"
                password "$2y$10$GJmd2HxhzkdDQmeunkR42.wFm9qSXFTX7Q4hbaEoWPjgyCbBMsDhC"
                access console 
                console
                    no member "default"
                    member "Full-"
                exit
            exit
            user "noc_admin"
                password "$2y$10$ZAYvKzvuBx1q6cBapxnSU.L/H1B6.f6oQYbkXCPPBJdMD9AxtY2r2"
                access console 
                console
                    no member "default"
                    member "Full--"
                exit
            exit
            user "ptd_admin"
                password "$2y$10$Au57zROMQEOITT.dXPnJw.GBobYJfZgJvpsUe0sZy2RbLpebXGN6e"
                access console 
                console
                    no member "default"
                    member "Full"
                exit
            exit
            user "snmpv3_user"
                password "$2y$10$uHuzCJwIL7UWiCFg3bIY6.MvCVYlLEIdfF6TBGx6D/2qqay3yJC7u"
                access console ftp snmp 
                snmp
                    authentication hash md5 d6f75d6c7c9e34c80e75afa74566f31f privacy des-key d6f75d6c7c9e34c80e75afa74566f31f
                    group "snmpv3"
                exit
            exit
            user "support_admin_VNPTTech"
                password "$2y$10$YliQNxwcOH4fXdjyCiv02.gYVr2hSL8zaAqtuB5aNwCjYWFMkFOVC"
                access console 
                console
                    no member "default"
                    member "Full-"
                exit
            exit
            user "tovt_admin_KHA"
                password "$2y$10$23/PSm0BMCBuXrI6LtxC6.eXDStrz1n3/etejUMaNkQ1.GOhqoEwO"
                access console 
                console
                    no member "default"
                    member "Full-"
                exit
            exit
            snmp
                access group "snmpv3" security-model usm security-level privacy read "iso" write "iso" notify "iso"
                access group "nmsPriv" security-model usm security-level privacy read "iso" write "iso" notify "iso"
                community "Lla.RtAyRW2" hash2 r version both
            exit
        exit
    exit
#--------------------------------------------------
echo "Log Configuration"
#--------------------------------------------------
    log 
        file-id 2 
            description "history command"
            location cf3: 
        exit 
        syslog 1
            address 10.0.34.18
            facility kernel
            log-prefix "KHA-CSG-CSG-KHCL02"
            port 5514
        exit 
        snmp-trap-group 98
            description "5620sam"
            trap-target "9418826EE4C5:main1" address 10.250.10.53 snmpv3 notify-community "snmpv3_user" security-level privacy
            trap-target "9418826EE4C5:main2" address 10.250.10.52 snmpv3 notify-community "snmpv3_user" security-level privacy
        exit 
        log-id 1 
            description "degbug_historycommand"
            time-format local
            from debug-trace change 
            to file 2
        exit 
        log-id 11 
            description "Syslog VM-1 to 10.0.34.18"
            time-format local
            from debug-trace main security change 
            to syslog 1
        exit 
        log-id 98 
            from main security 
            to snmp 1024
        exit 
    exit 
#--------------------------------------------------
echo "System Security Cpm Hw Filters and PKI Configuration"
#--------------------------------------------------
    system
        security
        exit
    exit
#--------------------------------------------------
echo "VLAN-Filter Configuration"
#--------------------------------------------------
    filter
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        network-queue "NQ-1" create
            description "Network-queue policy to change scheduler"
            queue 1 create
                rate 100 cir 15
                high-prio-only 10
            exit
            queue 2 create
                rate 100 cir 5
            exit
            queue 3 create
                rate 100 cir 5
            exit
            queue 4 create
                rate 100 cir 20
            exit
            queue 5 best-effort create
                rate 100 cir 5
            exit
            queue 6 create
                rate 80 cir 40
            exit
            queue 7 create
                rate 10 cir 5
            exit
            queue 8 create
                rate 10 cir 5
            exit
            queue 9 multipoint create
                high-prio-only 10
            exit
            fc af create
                multicast-queue 9
                queue 3
            exit
            fc be create
                multicast-queue 9
                queue 1
            exit
            fc ef create
                multicast-queue 9
                queue 6
            exit
            fc h1 create
                multicast-queue 9
                queue 7
            exit
            fc h2 create
                multicast-queue 9
                queue 5
            exit
            fc l1 create
                multicast-queue 9
                queue 4
            exit
            fc l2 create
                multicast-queue 9
                queue 2
            exit
            fc nc create
                multicast-queue 9
                queue 8
            exit
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        sap-ingress 200 create
            description "L2VPN SAP ingress QoS policy - 8 Queues"
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc "af" create
                queue 3
            exit
            fc "be" create
                queue 1
            exit
            fc "ef" create
                queue 6
            exit
            fc "h1" create
                queue 7
            exit
            fc "h2" create
                queue 5
            exit
            fc "l1" create
                queue 4
            exit
            fc "l2" create
                queue 2
            exit
            fc "nc" create
                queue 8
            exit
            dot1p 0 fc "be" priority low
            dot1p 1 fc "l2" priority high
            dot1p 2 fc "af" priority low
            dot1p 3 fc "l1" priority high
            dot1p 4 fc "h2" priority high
            dot1p 5 fc "ef" priority high
            dot1p 6 fc "h1" priority high
            dot1p 7 fc "nc" priority high
        exit
        sap-ingress 201 create
            description "L2VPN SAP egress QoS policy - FC = be"
            queue 1 create
            exit
        exit
        sap-ingress 300 create
            description "L3VPN SAP ingress QoS policy - 8 Queues"
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc "af" create
                queue 3
            exit
            fc "be" create
                queue 1
            exit
            fc "ef" create
                queue 6
            exit
            fc "h1" create
                queue 7
            exit
            fc "h2" create
                queue 5
            exit
            fc "l1" create
                queue 4
            exit
            fc "l2" create
                queue 2
            exit
            fc "nc" create
                queue 8
            exit
            dscp af22 fc "af" priority low
            dscp af21 fc "af" priority high
            dscp be fc "be" priority low
            dscp ef fc "ef" priority high
            dscp nc1 fc "h1" priority high
            dscp af41 fc "h2" priority high
            dscp af31 fc "l1" priority high
            dscp af11 fc "l2" priority high
            dscp nc2 fc "nc" priority high
        exit
        sap-ingress 306 create
            description "L3VPN SAP ingress QoS policy - FC = EF"
            queue 1 create
            exit
            default-fc "ef"
            default-priority high
        exit
        sap-egress 200 create
            description "L2VPN SAP egress QoS policy - 8 Queues"
            queue 1 create
                rate max cir 150000
            exit
            queue 2 create
                rate max cir 50000
            exit
            queue 3 create
                rate max cir 50000
            exit
            queue 4 create
                rate max cir 200000
            exit
            queue 5 best-effort create
                rate max cir 50000
            exit
            queue 6 create
                rate 800000 cir 400000
            exit
            queue 7 create
                rate 100000 cir 50000
            exit
            queue 8 create
                rate 100000 cir 50000
            exit
            fc af create
                queue 3
                dot1p 2
            exit 
            fc be create
                queue 1
                dot1p 0
            exit 
            fc ef create
                queue 6
                dot1p 5
            exit 
            fc h1 create
                queue 7
                dot1p 6
            exit 
            fc h2 create
                queue 5
                dot1p 4
            exit 
            fc l1 create
                queue 4
                dot1p 3
            exit 
            fc l2 create
                queue 2
                dot1p 1
            exit 
            fc nc create
                queue 8
                dot1p 7
            exit 
        exit
        sap-egress 201 create
            description "L2VPN SAP egress QoS policy - FC = be"
            queue 1 create
            exit
            fc be create
                queue 1
                dot1p 0
            exit 
        exit
        sap-egress 300 create
            description "L3VPN SAP egress QoS policy - 8 Queues"
            queue 1 create
                rate max cir 150000
            exit
            queue 2 create
                rate max cir 50000
            exit
            queue 3 create
                rate max cir 50000
            exit
            queue 4 create
                rate max cir 200000
            exit
            queue 5 best-effort create
                rate max cir 50000
            exit
            queue 6 create
                rate 800000 cir 400000
            exit
            queue 7 create
                rate 100000 cir 50000
            exit
            queue 8 create
                rate 100000 cir 50000
            exit
            fc af create
                queue 3
                dscp in-profile af21 out-profile af22
            exit 
            fc be create
                queue 1
                dscp be
            exit 
            fc ef create
                queue 6
                dscp ef
            exit 
            fc h1 create
                queue 7
                dscp nc1
            exit 
            fc h2 create
                queue 5
                dscp af41
            exit 
            fc l1 create
                queue 4
                dscp af31
            exit 
            fc l2 create
                queue 2
                dscp af11
            exit 
            fc nc create
                queue 8
                dscp nc2
            exit 
        exit
        sap-egress 306 create
            description "L3VPN SAP egress QoS policy - FC = EF"
            queue 1 create
            exit
            queue 6 create
            exit
            fc ef create
                queue 6
                dscp ef
            exit 
        exit
        mc-mlppp
        exit
        network 1000 create
            description "Network policy to change ingress classification and egress remarking"
            ingress
                dscp be fc be profile out
                dscp ef fc ef profile in
                dscp nc1 fc h1 profile in
                dscp nc2 fc nc profile in
                dscp af11 fc l2 profile in
                dscp af21 fc af profile in
                dscp af22 fc af profile out
                dscp af31 fc l1 profile in
                dscp af41 fc h2 profile in
                lsp-exp 0 fc be profile out
                lsp-exp 1 fc l2 profile in
                lsp-exp 2 fc af profile in
                lsp-exp 3 fc l1 profile in
                lsp-exp 4 fc h2 profile in
                lsp-exp 5 fc ef profile in
                lsp-exp 6 fc h1 profile in
                lsp-exp 7 fc nc profile in
            exit
            egress
                fc af
                    dscp-in-profile af21
                    dscp-out-profile af22
                    lsp-exp-in-profile 2
                exit
                fc h2
                    dscp-out-profile af41
                exit
                fc l1
                    dscp-in-profile af31
                    dscp-out-profile af31
                    lsp-exp-out-profile 3
                exit
                fc l2
                    dscp-in-profile af11
                    dscp-out-profile af11
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "Card Configuration"
#--------------------------------------------------
    card 1
        card-type iom-sar
        mda 1
            mda-type i8-chds1-x
            no shutdown
        exit
        mda 2
            mda-type i7-mix-eth
            no shutdown
        exit
        mda 3
            mda-type i7-mix-eth
            no shutdown
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/1
        shutdown
        tdm
        exit
    exit
    port 1/1/2
        shutdown
        tdm
        exit
    exit
    port 1/1/3
        shutdown
        tdm
        exit
    exit
    port 1/1/4
        shutdown
        tdm
        exit
    exit
    port 1/1/5
        shutdown
        tdm
        exit
    exit
    port 1/1/6
        shutdown
        tdm
        exit
    exit
    port 1/1/7
        shutdown
        tdm
        exit
    exit
    port 1/1/8
        shutdown
        tdm
        exit
    exit
    port 1/2/1
        description "TO_3G4G-KHCL36_PO_NA_TY_Noitinh/FO/VNPT_NO_LL000408810"
        ethernet
            encap-type dot1q
            mtu 9212
            xor-mode sfp
        exit
        no shutdown
    exit
    port 1/2/2
        description "TO_SERVER_PO_NA_TY_NOISITE/FO/MBF_NO_TUNGUON_KHCL02"
        ethernet
            mtu 9212
        exit
        no shutdown
    exit
    port 1/2/3
        shutdown
        ethernet
            mode network
            mtu 9212
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
    exit
    port 1/2/4
        description "TO_2G3G4G-KHCL02_PO_NA_TY_Noisite/FO/MBF_NO_NA"
        ethernet
            encap-type dot1q
            mtu 9212
        exit
        no shutdown
    exit
    port 1/2/5
        description "TO_LSW-KHCL13_PO_Gi0/4_TY_Noitinh/FO/CMC_NO_NA"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 9212
            network
                queue-policy "NQ-1"
            exit
        exit
        no shutdown
    exit
    port 1/2/6
        description "TO_LSW-KHCL09_PO_Gi0/4_TY_Noitinh/FO/CMC_NO_NA"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 9212
            network
                queue-policy "NQ-1"
            exit
        exit
        no shutdown
    exit
    port 1/2/7
        description "TO_CSG-KHCR27_PO_Te-1/3/7_TY_Noitinh/FO/CMC_NO_NA"
        ethernet
            mode network
            encap-type dot1q
            mtu 9212
            network
                queue-policy "NQ-1"
            exit
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            hold-time up 5
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/3/1
        shutdown
        ethernet
        exit
    exit
    port 1/3/2
        shutdown
        ethernet
        exit
    exit
    port 1/3/3
        shutdown
        ethernet
            mode network
            mtu 9212
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
    exit
    port 1/3/4
        description "TO_3G4G-KHCL40_PO_NA_TY_Noisite/FO/MBF_NO_RF-CMC"
        ethernet
            encap-type dot1q
            mtu 9212
        exit
        no shutdown
    exit
    port 1/3/5
        description "TO_AON_PO_NA_TY_Noitinh/FO/MBF_NO_LeDinhHoa9220"
        ethernet
            encap-type dot1q
            mtu 9212
        exit
        no shutdown
    exit
    port 1/3/6
        description "TO_AON_PO_NA_TY_Noitinh/FO/MBF_NO_LeDinhHoa_Line2"
        ethernet
            encap-type dot1q
            mtu 9212
        exit
        no shutdown
    exit
    port 1/3/7
        description "TO_AGG-KHACLM11_PO_Te-6/1/3_TY_Noitinh/FO/CMC_NO_NA"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 9212
            network
                queue-policy "NQ-1"
            exit
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            hold-time up 5
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "LAG Configuration"
#--------------------------------------------------
    lag 1
        description "Metro CSG-KHCL02_LAG1___CSG-KHCR27_LAG2_10GB"
        mode network
        encap-type dot1q
        port 1/2/7 sub-group 1
        lacp active administrative-key 32769 
        no shutdown
    exit
    lag 2
        description "Metro CSG-KHCL02_LAG2___AGG-KHACLM11_LAG4_10GB"
        mode hybrid
        encap-type dot1q
        port 1/3/7 sub-group 1
        lacp active administrative-key 32768 
        no shutdown
    exit
#--------------------------------------------------
echo "External Alarm Configuration"
#--------------------------------------------------
    external-alarms
    exit
#--------------------------------------------------
echo "Network Security Configuration"
#--------------------------------------------------
    security
        logging
        exit
        begin
        commit
    exit
#--------------------------------------------------
echo "Management Router Configuration"
#--------------------------------------------------
    router management
    exit

#--------------------------------------------------
echo "Router (Network Side) Configuration"
#--------------------------------------------------
    router 
        if-attribute
            admin-group "AGG" value 0
            admin-group "CSG" value 1
        exit
        interface "loopback0"
            address 10.250.92.59/32
            loopback
            no shutdown
        exit
        interface "system"
            address 10.250.91.59/32
            bfd 500 receive 500 multiplier 3 type np
            no shutdown
        exit
        interface "to-LSW-KHCL09"
            address 10.250.138.9/30
            ldp-sync-timer 10
            port 1/2/6:1000
            qos 1000
            no shutdown
        exit
        interface "to-LSW-KHCL13"
            address 10.250.138.13/30
            ldp-sync-timer 10
            port 1/2/5:1000
            qos 1000
            no shutdown
        exit
        interface "to_AGG-KHACLM11"
            address 10.250.95.26/30
            ldp-sync-timer 10
            port lag-2:901
            qos 1000
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "to_CSG-KHCR27"
            address 10.250.95.29/30
            ldp-sync-timer 10
            port lag-1:901
            qos 1000
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        autonomous-system 65335
        ecmp 2
        router-id 10.250.91.59
#--------------------------------------------------
echo "SGT Mapping Configuration"
#--------------------------------------------------
        sgt-qos
            application bgp dscp nc1
            application ldp dscp nc1
            application ospf dscp nc1
            application rsvp dscp nc1
            dscp nc1 fc h1
        exit
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
            traffic-engineering
            timers
                spf-wait 10 10 10
                lsa-generate 10 10 10
                lsa-arrival 2
            exit
            area 0.0.0.32
                interface "system"
                    bfd-enable 
                    no shutdown
                exit
                interface "loopback0"
                    no shutdown
                exit
                interface "to_AGG-KHACLM11"
                    interface-type point-to-point
                    metric 100
                    authentication-type message-digest
                    bfd-enable 
                    message-digest-key 1 md5 "9zSdW/TXP.Le5O1cliNvcaoaY6N6ngqYLkzTgAf16GFLbDx.ks6o57dEtd9W7ldW" hash2
                    no shutdown
                exit
                interface "to_CSG-KHCR27"
                    interface-type point-to-point
                    metric 100
                    authentication-type message-digest
                    bfd-enable 
                    message-digest-key 1 md5 "cXLMfm6JrheALcpsG.2yBwvOMzEYdRf.BGaQSTdIBSEPEMSMLvTGtrVrpfHCuFsu" hash2
                    no shutdown
                exit
                interface "to-LSW-KHCL09"
                    interface-type point-to-point
                    mtu 9000
                    metric 10000
                    authentication-type message-digest
                    message-digest-key 1 md5 "cXLMfm6JrheALcpsG.2yBkzadmTFjEQwSQ8P.BpxSPZjdT11dFkIKnFNHOMsH8/T" hash2
                    no shutdown
                exit
                interface "to-LSW-KHCL13"
                    interface-type point-to-point
                    mtu 9000
                    metric 10000
                    authentication-type message-digest
                    message-digest-key 1 md5 "cXLMfm6JrheALcpsG.2yBkzadmTFjEQwXo23OyyN.ujFniRfsHf5O7wm71IXXm41" hash2
                    no shutdown
                exit
            exit
        exit
#--------------------------------------------------
echo "PIM Configuration"
#--------------------------------------------------
        pim
            interface "to_AGG-KHACLM11"
            exit
            interface "to_CSG-KHCR27"
            exit
            rp
                static
                exit
                bsr-candidate
                    shutdown
                exit
                rp-candidate
                    shutdown
                exit
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS Configuration"
#--------------------------------------------------
        mpls
            resignal-timer 30
            admin-group-frr
            interface "system"
                no shutdown
            exit
            interface "to_AGG-KHACLM11"
                admin-group "CSG"
                no shutdown
            exit
            interface "to_CSG-KHCR27"
                admin-group "CSG"
                no shutdown
            exit
            interface "to-LSW-KHCL09"
                admin-group "CSG"
                no shutdown
            exit
            interface "to-LSW-KHCL13"
                admin-group "CSG"
                no shutdown
            exit
        exit
#--------------------------------------------------
echo "RSVP Configuration"
#--------------------------------------------------
        rsvp
            interface "system"
                no shutdown
            exit
            interface "to_AGG-KHACLM11"
                hello-interval 10000
                bfd-enable
                no shutdown
            exit
            interface "to_CSG-KHCR27"
                hello-interval 10000
                bfd-enable
                no shutdown
            exit
            interface "to-LSW-KHCL09"
                no shutdown
            exit
            interface "to-LSW-KHCL13"
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS LSP Configuration"
#--------------------------------------------------
        mpls
            path "dyn"
                no shutdown
            exit
            lsp "LSP01-to-AGG-KHACRH11"
                to 10.250.88.12
                cspf
                include "CSG"
                propagate-admin-group
                adspec
                fast-reroute facility
                    propagate-admin-group
                exit
                primary "dyn"
                exit
                no shutdown
            exit
            lsp "LSP01-to-AGG-KHACLM11"
                to 10.250.88.11
                cspf
                include "CSG"
                propagate-admin-group
                adspec
                fast-reroute facility
                    propagate-admin-group
                exit
                primary "dyn"
                exit
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "LDP Configuration"
#--------------------------------------------------
        ldp
            interface-parameters
                interface "to_AGG-KHACLM11"
                exit
                interface "to_CSG-KHCR27"
                exit
                interface "to-LSW-KHCL09"
                exit
                interface "to-LSW-KHCL13"
                exit
            exit
            targeted-session
                peer 10.250.88.11
                    bfd-enable
                exit
                peer 10.250.88.12
                    bfd-enable
                exit
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "TWAMP Light Configuration"
#--------------------------------------------------
        twamp-light
            reflector udp-port 64364 create
                prefix 10.0.0.0/8 create
                exit
                prefix 10.250.0.0/24 create
                exit
                no shutdown
            exit
        exit
    exit

#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        sdp 1011 create
            far-end 10.250.88.11
            lsp "LSP01-to-AGG-KHACLM11"
            keep-alive
                shutdown
            exit
            no shutdown
        exit
        sdp 1012 create
            far-end 10.250.88.12
            lsp "LSP01-to-AGG-KHACRH11"
            keep-alive
                shutdown
            exit
            no shutdown
        exit
        sdp 2222 create
            far-end 10.250.91.61
            ldp
            keep-alive
                shutdown
            exit
            no shutdown
        exit
        customer 1 create
            description "Default customer"
        exit
        vprn 20001 customer 1 create
            interface "KHCL02-2G-ABIS" create
            exit
        exit
        vprn 30001 customer 1 create
            interface "KHCL36-NodeB" create
            exit
            interface "KHCL02-NodeB" create
            exit
            interface "KHCL40-NodeB" create
            exit
        exit
        vprn 30010 customer 1 create
            interface "KHCL36-3G-OAM" create
            exit
            interface "KHCL02-3G-OAM" create
            exit
            interface "KHCL40-3G-OAM" create
            exit
            interface "TUNGUON_KHCL02" create
            exit
        exit
        vprn 40001 customer 1 create
            interface "KHCL02-eNodeB" create
            exit
            interface "KHCL36-eNodeB" create
            exit
            interface "KHCL40-eNodeB" create
            exit
        exit
        vprn 40004 customer 1 create
            interface "KHCL02-4G-OAM" create
            exit
            interface "KHCL36-4G-OAM" create
            exit
            interface "KHCL40-4G-OAM" create
            exit
        exit
        vprn 20001 customer 1 create
            description "Abis-2G"
            vrf-import "Import-2G-Abis-NSN"
            vrf-export "Export-2G-Abis-NSN"
            autonomous-system 65335
            route-distinguisher 10.250.91.59:20001
            interface "KHCL02-2G-ABIS" create
                description "KHCL02-2G-ABIS"
                address 10.26.157.1/29
                sap 1/2/4:3447 create
                    ingress
                        qos 306
                    exit
                    egress
                        qos 306
                    exit
                exit
            exit
            spoke-sdp 1011 create
            exit
            spoke-sdp 1012 create
            exit
            no shutdown
        exit
        vprn 30001 customer 1 create
            description "NSN-3G-data, vprn 30001"
            vrf-import "import-3G-data"
            vrf-export "export-3G-data"
            autonomous-system 65335
            route-distinguisher 10.250.91.59:30001
            interface "KHCL36-NodeB" create
                description "KHCL36-NodeB"
                address 10.33.196.101/30
                sap 1/2/1:308 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL02-NodeB" create
                description "KHCL02-NodeB"
                address 10.33.227.125/30
                sap 1/2/4:312 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL40-NodeB" create
                description "KHCL40-NodeB"
                address 10.28.220.125/30
                sap 1/3/4:347 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            spoke-sdp 1011 create
            exit
            spoke-sdp 1012 create
            exit
            no shutdown
        exit
        vprn 30010 customer 1 create
            description "NSN-3G-OAM, vprn 30010"
            vrf-import "import-3G-OAM"
            vrf-export "export-3G-OAM"
            autonomous-system 65335
            route-distinguisher 10.250.91.59:30010
            interface "KHCL36-3G-OAM" create
                description "KHCL36-3G-OAM"
                address 10.33.196.97/30
                sap 1/2/1:358 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL02-3G-OAM" create
                description "KHCL02-3G-OAM"
                address 10.33.227.121/30
                sap 1/2/4:362 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL40-3G-OAM" create
                description "KHCL40-3G-OAM"
                address 10.28.220.121/30
                sap 1/3/4:397 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "TUNGUON_KHCL02" create
                address 10.174.66.1/30
                sap 1/2/2 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            static-route 10.28.226.184/30 next-hop 10.28.220.122
            static-route 10.33.249.216/30 next-hop 10.33.195.226
            static-route 10.33.249.220/30 next-hop 10.33.195.234
            static-route 10.33.249.224/30 next-hop 10.33.196.98
            static-route 10.33.252.248/30 next-hop 10.33.227.122
            static-route 10.33.254.244/30 next-hop 10.33.230.186
            spoke-sdp 1011 create
            exit
            spoke-sdp 1012 create
            exit
            no shutdown
        exit
        epipe 33333 customer 1 create
            shutdown
            service-mtu 9000
            sap lag-2:1111 create
            exit
            spoke-sdp 2222:1000 create
                no shutdown
            exit
        exit
        vprn 40001 customer 1 create
            description "NSN-4G-data, vprn 40001"
            vrf-import "Import-4G-data"
            vrf-export "Export-4G-data"
            autonomous-system 65335
            route-distinguisher 10.250.91.59:40001
            vrf-target target:65335:40001
            interface "KHCL02-eNodeB" create
                description "KHCL02-eNodeB"
                address 10.58.139.249/30
                sap 1/2/4:198 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL36-eNodeB" create
                description "KHCL36-eNodeB"
                address 10.31.88.49/29
                sap 1/2/1:100 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL40-eNodeB" create
                description "KHCL40-eNodeB"
                address 10.31.88.97/29
                sap 1/3/4:101 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            spoke-sdp 1011 create
            exit
            spoke-sdp 1012 create
            exit
            no shutdown
        exit
        vprn 40004 customer 1 create
            description "NSN-4G-OAM, vprn 40004"
            vrf-import "Import-4G-OAM"
            vrf-export "Export-4G-OAM"
            autonomous-system 65335
            route-distinguisher 10.250.91.59:40004
            vrf-target target:65335:40004
            interface "KHCL02-4G-OAM" create
                description "KHCL02-4G-OAM"
                address 10.58.139.253/30
                sap 1/2/4:298 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL36-4G-OAM" create
                description "KHCL36-4G-OAM"
                address 10.31.88.57/29
                sap 1/2/1:200 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            interface "KHCL40-4G-OAM" create
                description "KHCL40-4G-OAM"
                address 10.31.88.105/29
                sap 1/3/4:201 create
                    ingress
                        qos 300
                    exit
                    egress
                        qos 300
                    exit
                exit
            exit
            spoke-sdp 1011 create
            exit
            spoke-sdp 1012 create
            exit
            no shutdown
        exit
        epipe 113503201 customer 1 create
            description "FTTx-ring-32"
            service-mtu 9014
            sap 1/3/5:* create
                ingress
                    qos 201
                exit
                egress
                    qos 201
                exit
            exit
            spoke-sdp 1011:113503201 create
                no shutdown
            exit
            no shutdown
        exit
        epipe 113503205 customer 1 create
            description "FTTx-ring-32"
            service-mtu 9014
            sap 1/3/6:3023 create
                ingress
                    qos 201
                exit
                egress
                    qos 201
                exit
            exit
            spoke-sdp 1011:113503205 create
                no shutdown
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Router (Service Side) Configuration"
#--------------------------------------------------
    router 
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
        exit
#--------------------------------------------------
echo "PIM Configuration"
#--------------------------------------------------
        pim
            no shutdown
        exit
#--------------------------------------------------
echo "Policy Configuration"
#--------------------------------------------------
        policy-options
            begin
            prefix-list "X2-default-route"
                prefix 0.0.0.0/0 exact
            exit
            community "SoO" members "origin:65335:1000" "origin:65335:1032"
            community "SoO-AGG" members "origin:65335:100" "origin:65335:103"
            community "RT-4G-X2" members "target:65335:40001"
            community "RT-4G-X2-65337" members "target:65337:40001"
            community "RT-3G-OAM-64803" members "target:64803:30010"
            community "RT-4G-OAM-65333" members "target:65333:40004"
            community "RT-3G-OAM-NTP-HN" members "target:64803:17002"
            community "RT-3G-OAM-export" members "target:131429:30020"
            community "RT-3G-OAM-import" members "target:131429:30010"
            community "RT-4G-OAM-export" members "target:131429:40003"
            community "RT-4G-OAM-import" members "target:131429:40004"
            community "RT-export-2G-TOP" members "target:131429:20011"
            community "RT-import-2G-TOP" members "target:131429:20001"
            community "RT-3G-OAM-NTP-HCM" members "target:131429:10002"
            community "RT-3G-data-export" members "target:131429:30011"
            community "RT-3G-data-import" members "target:131429:30001"
            community "RT-4G-data-export" members "target:131429:40001"
            community "RT-4G-data-import" members "target:131429:40010"
            community "RT-export-2G-65335" members "target:65335:20011"
            community "RT-3G-OAM-export-64803" members "target:64803:30020"
            community "RT-4G-OAM-export-64803" members "target:64803:40003"
            community "RT-4G-OAM-export-65335" members "target:65335:40003"
            community "RT-4G-OAM-import-65335" members "target:65335:40004"
            community "RT-3G-data-export-65335" members "target:65335:30001"
            community "RT-Import-3G-OAM-DefaultRoute" members "target:65335:998"
            community "RT-Import-4G-OAM-DefaultRoute" members "target:65335:997"
            community "RT-Import-2G-Abis-DefaultRoute" members "target:65335:995"
            community "RT-Import-3G-data-DefaultRoute" members "target:65335:999"
            community "RT-Import-4G-Data-DefaultRoute" members "target:65335:996"
            policy-statement "Export-4G-OAM"
                entry 10
                    action accept
                        community add "RT-4G-OAM-export-65335" "RT-4G-OAM-export" "SoO" "RT-4G-OAM-export-64803"
                    exit
                exit
            exit
            policy-statement "Import-4G-OAM"
                entry 50
                    from
                        community "RT-Import-4G-OAM-DefaultRoute"
                    exit
                    action accept
                    exit
                exit
                default-action reject
            exit
            policy-statement "export-3G-OAM"
                entry 10
                    action accept
                        community add "RT-3G-OAM-export" "SoO" "RT-3G-OAM-export-64803"
                    exit
                exit
            exit
            policy-statement "import-3G-OAM"
                entry 50
                    from
                        community "RT-Import-3G-OAM-DefaultRoute"
                    exit
                    action accept
                    exit
                exit
                default-action reject
            exit
            policy-statement "Export-4G-data"
                entry 10
                    action accept
                        community add "RT-4G-data-export" "RT-4G-X2" "SoO"
                    exit
                exit
            exit
            policy-statement "Import-4G-data"
                entry 50
                    from
                        community "RT-Import-4G-Data-DefaultRoute"
                    exit
                    action accept
                    exit
                exit
                default-action reject
            exit
            policy-statement "export-3G-data"
                entry 10
                    action accept
                        community add "RT-3G-data-export" "RT-3G-data-export-65335" "SoO"
                    exit
                exit
            exit
            policy-statement "import-3G-data"
                entry 50
                    from
                        community "RT-Import-3G-data-DefaultRoute"
                    exit
                    action accept
                    exit
                exit
                default-action reject
            exit
            policy-statement "Export-2G-Abis-NSN"
                entry 10
                    action accept
                        community add "RT-export-2G-TOP" "SoO" "RT-export-2G-65335"
                    exit
                exit
            exit
            policy-statement "Import-2G-Abis-NSN"
                entry 50
                    from
                        community "RT-Import-2G-Abis-DefaultRoute"
                    exit
                    action accept
                    exit
                exit
            exit
            commit
        exit
#--------------------------------------------------
echo "BGP Configuration"
#--------------------------------------------------
        bgp
            min-route-advertisement 2
            local-as 65335
            router-id 10.250.91.59
            enable-peer-tracking
            rapid-withdrawal
            bfd-enable
            backup-path ipv4
            transport-tunnel mpls
            group "Aggregation"
                family vpn-ipv4 vpn-ipv6 route-target
                authentication-key ".UlMqMzCADVvQT.R6GcEK4u0KiEKLkJKwxgzFNbQsCM" hash2
                peer-as 65335
                local-address 10.250.91.59
                bfd-enable
                neighbor 10.250.88.11
                exit
                neighbor 10.250.88.12
                exit
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "Network Security Zone Configuration"
#--------------------------------------------------
    exit

#--------------------------------------------------
echo "Source IP Address Configuration"
#--------------------------------------------------
    system
        security
            source-address
                application tacplus "loopback0"
                application snmptrap "loopback0"
                application syslog "loopback0"
                application ntp "loopback0"
            exit
        exit
    exit
#--------------------------------------------------
echo "System Sync-If-Timing Configuration"
#--------------------------------------------------
    system
        sync-if-timing
            begin
            ql-selection
            ref-order ref1 ref2 external 
            ref1
                source-port 1/2/7
                no shutdown
            exit
            ref2
                source-port 1/3/7
                no shutdown
            exit
            revert
            commit
        exit
    exit
#--------------------------------------------------
echo "System Time Configuration"
#--------------------------------------------------
    system
        time
            ntp
            exit
        exit
    exit

exit all

# Finished WED FEB 12 00:00:04 2025 UTC
